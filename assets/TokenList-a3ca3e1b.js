import{_ as N,d as V,b as D,g,W as F,e as P,p as A,n as E,r as w,o as u,c as S,w as z,l as y,a as l,k,q as O,T as W,t as v,u as i,z as $,F as j}from"./index-695464e2.js";import{u as R}from"./create-2f00f818.js";import{g as U,f as q}from"./index-f06f0280.js";import{B as C}from"./bignumber-3e8dfdf6.js";const G={class:"chain-swap"},H=["onClick"],J={class:"left"},K={class:"swap-name"},M={class:"right"},Q={__name:"ChainSwaps",props:{showChainSwap:Boolean},emits:["update:showChainSwap"],setup(_,{emit:h}){const L=_,{t:T}=V(),m=D(),p=R(),r=g(""),c=g([]);F(()=>L.showChainSwap,(n,a)=>{n&&c.value.length==0&&f()}),f();const B=P(()=>r.value?c.value.filter(n=>n.showName.toLowerCase().indexOf(r.value.toLocaleLowerCase())!=-1):c.value);async function f(){c.value=[];let n=m.chain;if(n=="bsc_test")c.value=[{chain:"bsc",factoryAddress:"0x6725F303b657a9451d8BA641348b6761A6CC7a17",isSwapSupported:1,name:"cakev2",routerAddress:"0xd99d1c33f9fc3444f8101754abc46c52416550d1",showName:"PancakeSwapV2",sortId:1,swapUrl:"https://pancakeswap.finance/swap?inputCurrency=BNB&outputCurrency=",swapIcon:"https://www.avestorage.cloud/swap/cakev2.jpeg"}];else try{let a=await A.ave.getChainSwaps(n);if(a.data.status==1){let s=a.data.data;if(s&&s.length>0)for(let o of s){let d="https://www.avestorage.cloud/swap/"+o.name+".jpeg",t={chain:o.chain,factoryAddress:o.factory_address,isSwapSupported:o.is_swap_supported,name:o.name,routerAddress:o.router_address,showName:o.show_name,sortId:o.sort_id,swapUrl:o.swap_url,swapIcon:d};c.value.push(t)}console.log(c.value)}else E(T("unknowError"))}catch(a){console.log(a)}finally{}}function b(n){p.chainSwap=n,h("update:showChainSwap",!1)}return(n,a)=>{const s=w("van-search"),o=w("van-icon"),d=w("van-action-sheet");return u(),S(d,{show:_.showChainSwap,"safe-area-inset-bottom":"",title:n.$t("selectSwap"),onClose:a[1]||(a[1]=t=>h("update:showChainSwap",!1)),onCancel:a[2]||(a[2]=t=>h("update:showChainSwap",!1))},{default:z(()=>[y(s,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),shape:"round",placeholder:n.$t("search"),clearable:""},null,8,["modelValue","placeholder"]),l("ul",G,[(u(!0),k(j,null,O(i(B),t=>(u(),k("li",{class:"swap-item",onClick:e=>b(t)},[l("div",J,[y(W,{class:"token-icon",tokenIcon:t.swapIcon},null,8,["tokenIcon"]),l("div",K,v(t.showName),1)]),l("div",M,[i(p).chainSwap&&i(p).chainSwap.factoryAddress==t.factoryAddress?(u(),S(o,{key:0,name:"success",color:"#3F80F7"})):$("",!0)])],8,H))),256))])]),_:1},8,["show","title"])}}},ue=N(Q,[["__scopeId","data-v-a1eea8b3"]]);const X={class:"token-list"},Y=["onClick"],Z={class:"left"},x={class:"token-info"},ee={class:"token-name"},ae={class:"token-address"},se={class:"right"},oe={key:0,class:"amount"},te={class:"price"},ne={class:"icon"},ce={__name:"TokenList",props:{showTokenList:Boolean},emits:["update:showTokenList"],setup(_,{emit:h}){const L=_,{t:T}=V(),m=D(),p=R(),r=g(""),c=g([]);F(()=>L.showChainSwap,(a,s)=>{a&&c.value.length==0&&b()}),b();const B=P(()=>r.value?r.value.startsWith("0x")?c.value.filter(a=>a.address.toLowerCase()==r.value.toLowerCase()):c.value.filter(a=>a.symbol.toLowerCase().indexOf(r.value.toLowerCase())>-1):c.value);function f(a){p.token=a,h("update:showTokenList",!1)}async function b(){let a=m.chain,s=[];if(a=="bsc_test")s=[{chain:"bsc",demical:18,name:"",symbol:"BNB",tokenAddress:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",currentPriceUsd:289.85489812433093,value:.0319133884,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.png"},{chain:"bsc",demical:18,name:"Binance-Peg BSC-USD",symbol:"USDT",tokenAddress:"0x337610d27c682E347C9cD60BD4b3b107C9d34dDd",currentPriceUsd:.9970705187821386,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0x55d398326f99059ff775485246999027b3197955.png"},{chain:"bsc",demical:18,name:"Wrapped BNB",symbol:"WBNB",tokenAddress:"0xae13d989dac2f0debff460ac112a837c89baa7cd",currentPriceUsd:289.85489812433093,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png"}];else try{let o=await A.ave.getUserToken(a,m.walletAddress);if(console.log(o),o.data.status==1){let t=o.data.data.filter(e=>new RegExp("^0x.*$","gi").test(e.token)&&e.value>0&&e.risk_score<60&&e.risk_level>=0&&e.flag!=="blacklist"&&e.symbol!==""&&e.flag!=="lp").map(e=>({chain:e.chain,demical:e.decimals,name:e.name,symbol:e.symbol,tokenAddress:e.token,currentPriceUsd:e.current_price_usd,value:e.value,icon:U(e.chain.toLowerCase(),e.token.toLowerCase())}));s=s.concat(t)}else return;let d=await A.ave.getSwapTokens(a);if(console.log(d),d.data.status==1){let t=d.data.data.filter(e=>new RegExp("^0x.*$","gi").test(e.token)&&s.findIndex(I=>I.tokenAddress==e.token)==-1&&e.risk_score<60&&e.risk_level>=0&&e.flag!=="blacklist"&&e.symbol!==""&&e.flag!=="lp").map(e=>({chain:e.chain,demical:e.decimals,name:e.name,symbol:e.symbol,tokenAddress:e.token,currentPriceUsd:e.current_price_usd,value:e.value,icon:U(e.chain.toLowerCase(),e.token.toLowerCase())}));s=s.concat(t)}else return}catch{E(T("unknowError")),s=[]}finally{}c.value=s}function n(){h("update:showTokenList",!1)}return(a,s)=>{const o=w("van-search"),d=w("van-icon"),t=w("van-action-sheet");return u(),S(t,{show:_.showTokenList,"safe-area-inset-bottom":"",title:a.$t("selectCurrency"),onClose:n,onCancel:n},{default:z(()=>[y(o,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),shape:"round",placeholder:a.$t("searchTokenOrName"),clearable:""},null,8,["modelValue","placeholder"]),l("ul",X,[(u(!0),k(j,null,O(i(B),e=>(u(),k("li",{class:"token-item",onClick:I=>f(e)},[l("div",Z,[y(W,{class:"token-icon",tokenIcon:e.icon},null,8,["tokenIcon"]),l("div",x,[l("div",ee,v(e.symbol),1),l("div",ae,v(i(q)(e.tokenAddress)),1)])]),l("div",se,[e.value>0?(u(),k("div",oe,[l("div",null,v(i(C)(e.value).toString().indexOf(".")==-1?i(C)(e.value):i(C)(e.value).toFixed(6)),1),l("div",te,"$"+v(i(C)(e.value).multipliedBy(e.currentPriceUsd).toFixed(2)),1)])):$("",!0),l("div",ne,[i(p).token&&i(p).token.tokenAddress==e.tokenAddress?(u(),S(d,{key:0,name:"success",color:"#3F80F7"})):$("",!0)])])],8,Y))),256))])]),_:1},8,["show","title"])}}},pe=N(ce,[["__scopeId","data-v-597386eb"]]);export{ue as C,pe as T};
