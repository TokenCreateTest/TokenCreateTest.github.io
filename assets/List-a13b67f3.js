import{_ as R}from"./noData-cd778682.js";import{T as j}from"./TokenName-eccc3a6e.js";import{C as h}from"./CopyText-d5365b17.js";import{_ as z,u as B,s as M,j as C,i as Y,d as x,a as E,r as W,w as H,e as k,K as O,o as n,c as m,f as g,z as f,t as s,l as u,A as w,x as r,L as P,h as l,E as q,b as v,q as K,m as U,y as G,p as $,M as J}from"./index-57098d62.js";import"./TokenIcon-cbe2b73b.js";/* empty css                                                          */import"./DoubleToken-1dbde041.js";/* empty css                                                            *//* empty css                                                          */const Q={class:"token-list"},X={key:0,class:"empty"},Z=["fit"],ee={class:"info"},te={key:1,class:"list"},oe={key:0},ae={key:1},ne={key:2},se={key:3},le={key:4},re={class:"pagination"},ie={__name:"List",setup(de){const a=B(),T=M(),I=C(0),A=C(10),{t:L}=Y();x();const b=E(),o=W({pageNumber:1,tokenList:[],loading:!1});async function y(){if(!a.walletAddress){q.error(L("pleaseConnectWallet")),o.loading=!1;return}o.loading=!0;try{let e=0,d=100;e<0&&(e=0);let p;a.create.v2?p=await v.wallet.metamask.contractTokenFactoryV2(a.create.tokenFactoryV2Address):p=await v.wallet.metamask.contractTokenFactory(a.create.tokenFactoryAddress),console.log(a.walletAddress);let i=await p.getOwnRecords(a.walletAddress,e.toString(),d.toString());console.log(i),o.tokenList=[];for(let c of i){let _={tokenAddress:c[6].toLowerCase(),createTime:Number(c[0]),symbol:c[4],name:c[3],chain:a.chain,deployerId:Number(c[5]),owner:c[2]};o.tokenList.unshift(_)}console.log(o.tokenList)}catch(e){console.log(e)}finally{o.loading=!1}}H(()=>a.isConnecting,e=>{e&&(console.log(222),y())},{immediate:!0});function N(){y()}function D(){T.loginDialogVisible=!0}function S(){b.push("/token/create")}function V(e){b.push(`/token/manage/${e.deployerId}/${e.chain}/${e.tokenAddress}`)}return(e,d)=>{const p=k("el-button"),i=k("el-table-column"),c=k("el-table"),_=k("el-pagination"),F=O("loading");return n(),m("div",Q,[!o.loading&&o.tokenList.length==0?(n(),m("div",X,[g("img",{style:{width:"80px"},src:R,fit:e.fit},null,8,Z),g("div",ee,[f(s(e.$t("noToken"))+"ï¼Œ",1),g("span",{onClick:y,style:{color:"#409eff",cursor:"pointer"}},s(e.$t("refresh")),1)]),u(a).isConnecting?(n(),w(p,{key:0,type:"primary",class:"btn-gradient create",onClick:d[0]||(d[0]=t=>S())},{default:r(()=>[f(s(e.$t("tokenCreate")),1)]),_:1})):(n(),w(p,{key:1,type:"primary",class:"btn-gradient create",onClick:d[1]||(d[1]=t=>D())},{default:r(()=>[f(s(e.$t("connectWallet")),1)]),_:1}))])):(n(),m("div",te,[P((n(),w(c,{class:"table-mine",data:o.tokenList},{default:r(()=>[l(i,{label:e.$t("tokenName"),width:"150"},{default:r(t=>[l(j,{class:"token-name",symbol:t.row.symbol,name:t.row.name,bigIcon:u(K)(u(a).chain.toLowerCase(),t.row.tokenAddress.toLowerCase()),smallIcon:u(U)(u(a).chain.toLowerCase())},null,8,["symbol","name","bigIcon","smallIcon"])]),_:1},8,["label"]),l(i,{label:e.$t("template"),width:"150"},{default:r(t=>[t.row.deployerId==0||t.row.deployerId==5?(n(),m("span",oe,s(e.$t("freeTax")),1)):t.row.deployerId==1||t.row.deployerId==6?(n(),m("span",ae,s(e.$t("feeToken")),1)):t.row.deployerId==2||t.row.deployerId==7?(n(),m("span",ne,s(e.$t("selfDividendToken")),1)):t.row.deployerId==3||t.row.deployerId==8?(n(),m("span",se,s(e.$t("addPoolDividend")),1)):t.row.deployerId==4?(n(),m("span",le,s(e.$t("dividendToken")),1)):G("",!0)]),_:1},8,["label"]),l(i,{label:e.$t("managerAddress")},{default:r(t=>[l(h,{text:t.row.owner,smallText:u($)(t.row.owner)},null,8,["text","smallText"])]),_:1},8,["label"]),l(i,{label:e.$t("tokenAddress")},{default:r(t=>[l(h,{text:t.row.tokenAddress,smallText:u($)(t.row.tokenAddress)},null,8,["text","smallText"])]),_:1},8,["label"]),l(i,{label:e.$t("createTime")},{default:r(t=>[f(s(u(J).unix(t.row.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),l(i,{label:e.$t("operate"),width:"90"},{default:r(t=>[l(p,{key:"primary",type:"primary",onClick:ce=>V(t.row),link:""},{default:r(()=>[f(s(e.$t("view")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[F,o.loading]]),g("div",re,[l(_,{background:"",layout:"prev, pager, next",total:I.value,onCurrentChange:N,"page-size":A.value,"current-page":o.pageNumber,"onUpdate:currentPage":d[2]||(d[2]=t=>o.pageNumber=t)},null,8,["total","page-size","current-page"])])]))])}}},be=z(ie,[["__scopeId","data-v-47f34fc9"]]);export{be as default};
