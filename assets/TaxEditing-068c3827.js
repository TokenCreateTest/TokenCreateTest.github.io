import{_ as O,d as j,$ as z,g as G,e as H,h as p,f as m,r as k,o as I,l as J,b as V,t as w,u as s,m as d,w as y,a as _,A as g,p as N,q as K,x as Q}from"./index-736b0d16.js";import{u as W}from"./manage-b08eda84.js";import{R as x}from"./Rate-391993e5.js";import{B as l}from"./bignumber-3e8dfdf6.js";import"./units-bacceeeb.js";const X={class:"rate-editing"},Y={class:"buy-rate"},Z={class:"title"},h={class:"sell-rate"},ee={class:"title"},le={__name:"TaxEditing",setup(ue){j(),z(),G();const e=W(),{t:B}=H(),T=p(!1),r=p(e.buyFundFee),i=p(e.buyLPFee),c=p(e.buyBurnFee),F=p(e.buyRewardFee),n=p(e.sellFundFee),o=p(e.sellLPFee),b=p(e.sellBurnFee),f=p(e.sellRewardFee);e.$subscribe((a,u)=>{r.value=e.buyFundFee,i.value=e.buyLPFee,c.value=e.buyBurnFee,F.value=e.buyRewardFee,n.value=e.sellFundFee,o.value=e.sellLPFee,b.value=e.sellBurnFee,f.value=e.sellRewardFee});const $=m(()=>{if(e.deployerId==1)return l(r.value).plus(i.value).plus(c.value);if(e.deployerId==2)return l(r.value).plus(i.value).plus(F.value)}),R=m(()=>{if(e.deployerId==1)return l(n.value).plus(o.value).plus(b.value);if(e.deployerId==2)return l(n.value).plus(o.value).plus(f.value)}),S=m(()=>{if(e.deployerId==1)return Number(l(20).minus(i.value).minus(c.value));if(e.deployerId==2)return Number(l(20).minus(i.value).minus(F.value))}),L=m(()=>{if(e.deployerId==1)return Number(l(20).minus(r.value).minus(c.value));if(e.deployerId==2)return Number(l(20).minus(r.value).minus(F.value))}),P=m(()=>{if(e.deployerId==1)return Number(l(20).minus(r.value).minus(i.value))}),U=m(()=>{if(e.deployerId==2)return Number(l(20).minus(r.value).minus(i.value).toNumber())}),C=m(()=>{if(e.deployerId==1)return Number(l(20).minus(o.value).minus(b.value));if(e.deployerId==2)return Number(l(20).minus(o.value).minus(f.value))}),E=m(()=>{if(e.deployerId==1)return Number(l(20).minus(n.value).minus(b.value));if(e.deployerId==2)return Number(l(20).minus(n.value).minus(f.value))}),q=m(()=>{if(e.deployerId==1)return Number(l(20).minus(n.value).minus(o.value))}),A=m(()=>{if(e.deployerId==2)return l(20).minus(n.value).minus(o.value).toNumber()});async function D(){if(e.deployerId==1){if(l(r.value).plus(c.value).plus(i.value).plus(n.value).plus(b.value).plus(o.value).lte(0)){N(B("taxlimit1"));return}}else if(e.deployerId==2&&l(r.value).plus(i.value).plus(n.value).plus(o.value).lte(0)){N(B("taxlimit2"));return}T.value=!0;try{const a=await K.token.contract(e.tokenAddress,e.abi);let u;e.deployerId==1?u=[l(i.value).div(100).multipliedBy(1e4).toNumber(),l(c.value).div(100).multipliedBy(1e4).toNumber(),l(r.value).div(100).multipliedBy(1e4).toNumber(),l(o.value).div(100).multipliedBy(1e4).toNumber(),l(b.value).div(100).multipliedBy(1e4).toNumber(),l(n.value).div(100).multipliedBy(1e4).toNumber()]:e.deployerId==2&&(u=[l(i.value).div(100).multipliedBy(1e4).toNumber(),l(F.value).div(100).multipliedBy(1e4).toNumber(),l(r.value).div(100).multipliedBy(1e4).toNumber(),l(o.value).div(100).multipliedBy(1e4).toNumber(),l(f.value).div(100).multipliedBy(1e4).toNumber(),l(n.value).div(100).multipliedBy(1e4).toNumber()]);const v=await a.completeCustoms(u);N({type:"success",message:B("submitSuccess")}),await v.wait(),e.getTokenFee(e.tokenAddress),N({type:"success",message:B("editTaxSuccess")})}catch(a){console.log(a),a.code===4001?N(B("userCancelOperate")):N(B("editTaxFail"))}finally{T.value=!1}}return(a,u)=>{const v=k("van-cell"),M=k("van-button");return I(),J("div",X,[V("div",Y,[V("div",Z,w(a.$t("editBuyTax",{buyFee:s($)})),1),d(v,{class:"rate-cell",title:a.$t("marketingTax")},{extra:y(()=>[d(x,{value:r.value,"onUpdate:value":u[0]||(u[0]=t=>r.value=t),maxValue:s(S)},null,8,["value","maxValue"])]),_:1},8,["title"]),d(v,{class:"rate-cell",title:a.$t("liquidityTax")},{extra:y(()=>[d(x,{value:i.value,"onUpdate:value":u[1]||(u[1]=t=>i.value=t),maxValue:s(L)},null,8,["value","maxValue"])]),_:1},8,["title"]),s(e).deployerId==1?(I(),_(v,{key:0,class:"rate-cell",title:a.$t("burnTax")},{extra:y(()=>[d(x,{value:c.value,"onUpdate:value":u[2]||(u[2]=t=>c.value=t),maxValue:s(P)},null,8,["value","maxValue"])]),_:1},8,["title"])):g("",!0),s(e).deployerId==2?(I(),_(v,{key:1,class:"rate-cell",title:a.$t("rewardTax")},{extra:y(()=>[d(x,{value:F.value,"onUpdate:value":u[3]||(u[3]=t=>F.value=t),maxValue:s(U)},null,8,["value","maxValue"])]),_:1},8,["title"])):g("",!0)]),V("div",h,[V("div",ee,w(a.$t("editSellTax",{sellFee:s(R)})),1),d(v,{class:"rate-cell",title:a.$t("marketingTax")},{extra:y(()=>[d(x,{value:n.value,"onUpdate:value":u[4]||(u[4]=t=>n.value=t),maxValue:s(C)},null,8,["value","maxValue"])]),_:1},8,["title"]),d(v,{class:"rate-cell",title:a.$t("liquidityTax")},{extra:y(()=>[d(x,{value:o.value,"onUpdate:value":u[5]||(u[5]=t=>o.value=t),maxValue:s(E)},null,8,["value","maxValue"])]),_:1},8,["title"]),s(e).deployerId==1?(I(),_(v,{key:0,class:"rate-cell",title:a.$t("burnTax")},{extra:y(()=>[d(x,{value:b.value,"onUpdate:value":u[6]||(u[6]=t=>b.value=t),maxValue:s(q)},null,8,["value","maxValue"])]),_:1},8,["title"])):g("",!0),s(e).deployerId==2?(I(),_(v,{key:1,class:"rate-cell",title:a.$t("rewardTax")},{extra:y(()=>[d(x,{value:f.value,"onUpdate:value":u[7]||(u[7]=t=>f.value=t),maxValue:s(A)},null,8,["value","maxValue"])]),_:1},8,["title"])):g("",!0)]),d(M,{type:"primary",round:"",block:"",class:"btn",loading:T.value,onClick:D},{default:y(()=>[Q(w(a.$t("submit")),1)]),_:1},8,["loading"])])}}},ne=O(le,[["__scopeId","data-v-d3191d53"]]);export{ne as default};
