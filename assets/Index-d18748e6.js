import{_ as Y,e as Z,g as K,d as Q,h as g,f as T,r as S,o as p,l as y,b as a,m as l,u as n,T as X,t as s,w as r,A as h,a as B,F as ee,D as te,E as ne,p as m,x as v,Y as se,Z as oe,q as ae}from"./index-736b0d16.js";import{g as le,f as j,c as re}from"./index-0b8c187f.js";import{B as _}from"./bignumber-3e8dfdf6.js";import{u as ie}from"./manage-b08eda84.js";import{D as N}from"./Dialog-ef2c1a93.js";import"./units-bacceeeb.js";/* empty css                                                       */const de=k=>(se("data-v-729b8d0d"),k=k(),oe(),k),ue={class:"manage"},ce=de(()=>a("div",{class:"top-background"},null,-1)),pe={class:"top"},me={class:"token-info"},fe={class:"left"},ve={class:"token-name"},ye={class:"right"},he={key:0},we={key:1},ge={key:0,class:"model-manage"},ke={class:"title"},be={key:1,class:"trade-manage"},Ce={class:"title"},$e={class:"authority-manage"},Te={class:"title"},_e={class:"bottom-operate"},Ie={key:2,class:"bottom-operate",style:{marginTop:"12px"}},Le={__name:"Index",setup(k){const P=window.ethereum.isMetaMask,{t:i}=Z(),b=K(),I=Q(),e=ie(),C=g(!1),f=T(()=>I.walletAddress.toLowerCase()===e.owner.toLowerCase()),A=T(()=>{if(e.deployerId==1)return _(e.buyFundFee).plus(e.buyLPFee).plus(e.buyBurnFee);if(e.deployerId==2)return _(e.buyFundFee).plus(e.buyLPFee).plus(e.buyRewardFee)}),M=T(()=>{if(e.deployerId==1)return _(e.sellFundFee).plus(e.sellLPFee).plus(e.sellBurnFee);if(e.deployerId==2)return _(e.sellFundFee).plus(e.sellLPFee).plus(e.sellRewardFee)});let E=e.name;e.$subscribe((t,o)=>{o.name!=E&&(document.title=i("manageName",{name:o.name}),E=o.name)});const w=g(!1),L=g(!1),$=g(!1),O=g("");function U(){w.value=!0}const R=T(()=>i("operationHash",{hash:j(O.value)}));async function z(){L.value=!0;try{const o=await new te(window.ethereum).getSigner(),u=new ne(e.tokenAddress,e.abi,o);let c=await u.renounceOwnership();O.value=c.hash,c.wait().then(async F=>{F.status===1&&(m({type:"success",message:i("upChainSuccessfully")}),e.owner=await u.owner())}),$.value=!0,w.value=!1}catch(t){console.log(t),t.info&&t.info.error&&t.info.error.code===4001?m(i("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?m(i("userCancelOperate")):m(i("unkonwError"))}finally{L.value=!1}}async function W(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e.tokenAddress,symbol:e.symbol,decimals:e.decimals,image:""}}})}catch(t){console.log(t),t.code===4001?m(i("userCancelOperate")):m(i("unkonwError"))}}async function D(){if(!C.value&&f.value&&!e.tradeStart){C.value=!0;try{await(await(await ae.token.contract(e.tokenAddress,e.abi)).startTrade()).wait(),m({type:"success",message:i("tradeOpening")}),e.tradeStart=!0}catch(t){console.log(t),t.code===4001?m(i("userCancelOperate")):m(i("unkonwError"))}finally{C.value=!1}}}function H(){b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/mintToken")}function V(){f.value&&b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/whiteList")}function q(){console.log(f.value),f.value&&b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/taxEditing")}function x(){b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/transferOwnership")}function G(){window.open("https://m.jfliquidity.xyz/add?utm_source=ave.ai")}function J(){window.open("http://m.avelock.xyz?utm_source=ave.ai")}return(t,o)=>{const u=S("van-button"),c=S("van-cell"),F=S("van-switch");return p(),y(ee,null,[a("div",ue,[ce,a("div",pe,[a("div",me,[a("div",fe,[l(X,{class:"token-icon",tokenIcon:n(le)(n(I).chain.toLowerCase(),n(e).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),a("div",ve,s(n(e).name),1)]),a("div",ye,[a("div",null,s(t.$t("chain"))+"："+s(n(I).chain.toUpperCase()),1),a("div",null,s(t.$t("totalSupply"))+"："+s(n(e).totalSupply)+" "+s(n(e).symbol),1),a("div",null,[n(e).deployerId==0?(p(),y("span",he,s(t.$t("rate"))+"："+s(t.$t("freeTax")),1)):(p(),y("span",we,s(t.$t("tax"))+"："+s(t.$t("buy"))+s(n(A))+"% "+s(t.$t("sell"))+s(n(M))+"%",1))]),a("div",null,s(t.$t("managerAddress"))+"："+s(n(j)(n(e).owner)),1)])])]),n(e).canMint?(p(),y("div",ge,[a("div",ke,s(t.$t("economicManagement")),1),l(c,{class:"cell"},{title:r(()=>[v(s(t.$t("published"))+" "+s(n(e).totalSupply),1)]),extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:o[0]||(o[0]=d=>H()),disabled:!n(f)},{default:r(()=>[v(s(t.$t("mint")),1)]),_:1},8,["disabled"])]),_:1})])):h("",!0),n(e).deployerId!=0&&(n(e).enableManualStartTrade||n(e).enableChangeTax||n(e).enableWhiteList)?(p(),y("div",be,[a("div",Ce,s(t.$t("tradeManage")),1),n(e).deployerId!=0&&n(e).enableManualStartTrade?(p(),B(c,{key:0,class:"cell",title:t.$t("openTrade")},{extra:r(()=>[l(F,{class:"switch","model-value":n(e).tradeStart,loading:C.value,onClick:o[1]||(o[1]=d=>D()),disabled:n(e).tradeStart||!n(f)},null,8,["model-value","loading","disabled"])]),_:1},8,["title"])):h("",!0),n(e).deployerId!=0&&n(e).enableChangeTax?(p(),B(c,{key:1,title:t.$t("taxEdit"),"is-link":"",onClick:o[2]||(o[2]=d=>q())},{value:r(()=>[v(s(t.$t("buy"))+s(n(A))+"% "+s(t.$t("sell"))+s(n(M))+"% ",1)]),_:1},8,["title"])):h("",!0),n(e).deployerId!=0&&n(e).enableWhiteList?(p(),B(c,{key:2,title:t.$t("whiteList"),"is-link":"",value:n(e).whiteListCount,onClick:o[3]||(o[3]=d=>V())},null,8,["title","value"])):h("",!0)])):h("",!0),a("div",$e,[a("div",Te,s(t.$t("authorityManagement")),1),l(c,{class:"cell",title:t.$t("contractOwnership")},{extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:U,disabled:!n(f)},{default:r(()=>[v(s(t.$t("renounce")),1)]),_:1},8,["disabled"])]),_:1},8,["title"]),l(c,{class:"cell",title:t.$t("transferOwnership")},{extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:x,disabled:!n(f)},{default:r(()=>[v(s(t.$t("transfer")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),a("div",_e,[l(u,{type:"primary",class:"manage-btn",onClick:G},{default:r(()=>[v(s(t.$t("LPAddOrManage")),1)]),_:1}),l(u,{type:"primary",class:"lock-btn",onClick:J},{default:r(()=>[v(s(t.$t("lockToken")),1)]),_:1})]),n(P)?(p(),y("div",Ie,[l(u,{type:"primary",block:"",onClick:W},{default:r(()=>[v(s(t.$t("importToWallet")),1)]),_:1})])):h("",!0)]),l(N,{show:w.value,"onUpdate:show":o[4]||(o[4]=d=>w.value=d),title:t.$t("giveUpConfirm"),message:t.$t("giveUpConfirmInfo"),cancelButtonText:t.$t("thinkAgain"),confirmButtonText:t.$t("confirmAndGiveUp"),confirmButtonLoading:L.value,onOnConfirm:z,onOnCancel:o[5]||(o[5]=d=>w.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),l(N,{show:$.value,"onUpdate:show":o[6]||(o[6]=d=>$.value=d),title:t.$t("giveUpSuccesslly"),message:n(R),cancelButtonText:t.$t("thinkAgain"),confirmButtonText:t.$t("copyHash"),onOnConfirm:o[7]||(o[7]=d=>n(re)(O.value)),onOnCancel:o[8]||(o[8]=d=>$.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText"])],64)}}},je=Y(Le,[["__scopeId","data-v-729b8d0d"]]);export{je as default};
