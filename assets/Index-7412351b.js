import{_ as H,d as P,f as R,b as V,e as T,g as y,r as O,o as v,k as h,a,l as i,u as s,T as q,t,w as d,z as I,F as x,D as F,E as W,n as u,v as m,O as G,P as J}from"./index-66221e7d.js";import{g as K,f as B,c as Q}from"./index-f41cac7d.js";import{D as S}from"./Dialog-eda25fd9.js";import{u as X}from"./manage-58d012b0.js";/* empty css                                                       */const Y=w=>(G("data-v-210846be"),w=w(),J(),w),Z={class:"manage"},ee=Y(()=>a("div",{class:"top-background"},null,-1)),te={class:"top"},oe={class:"token-info"},ne={class:"left"},se={class:"token-name"},ae={class:"right"},ie={key:0},re={key:1},le={key:0,class:"model-manage"},ce={class:"title"},de={class:"authority-manage"},ue={class:"title"},me={class:"bottom-operate"},pe={key:1,class:"bottom-operate",style:{marginTop:"12px"}},fe={__name:"Index",setup(w){const A=window.ethereum.isMetaMask,{t:l}=P(),L=R(),k=V(),o=X(),$=T(()=>k.walletAddress.toLowerCase()===o.owner.toLowerCase());let b=o.name;o.$subscribe((e,n)=>{n.name!=b&&(document.title=l("manageName",{name:n.name}),b=n.name)});function M(){L.push("/manage/"+o.deployerId+"/"+o.tokenAddress+"/addToken")}const p=y(!1),_=y(!1),g=y(!1),C=y("");function U(){p.value=!0}const N=T(()=>l("operationHash",{hash:B(C.value)}));async function z(){_.value=!0;try{const n=await new F(window.ethereum).getSigner(),c=new W(o.tokenAddress,o.abi,n);let f=await c.renounceOwnership();C.value=f.hash,f.wait().then(async r=>{r.status===1&&(u({type:"success",message:l("upChainSuccessfully")}),o.owner=await c.owner())}),g.value=!0,p.value=!1}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?u(l("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?u(l("userCancelOperate")):u(l("unkonwError"))}finally{_.value=!1}}async function E(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:o.tokenAddress,symbol:o.symbol,decimals:o.decimals,image:""}}})}catch(e){console.log(e),e.code===4001?u(l("userCancelOperate")):u(l("unkonwError"))}}function j(){window.open("https://m.jfliquidity.xyz/add?utm_source=ave.ai")}function D(){window.open("http://m.avelock.xyz?utm_source=ave.ai")}return(e,n)=>{const c=O("van-button"),f=O("van-cell");return v(),h(x,null,[a("div",Z,[ee,a("div",te,[a("div",oe,[a("div",ne,[i(q,{class:"token-icon",tokenIcon:s(K)(s(k).chain.toLowerCase(),s(o).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),a("div",se,t(s(o).name),1)]),a("div",ae,[a("div",null,t(e.$t("chain"))+"："+t(s(k).chain.toUpperCase()),1),a("div",null,t(e.$t("totalSupply"))+"："+t(s(o).totalSupply)+" "+t(s(o).symbol),1),a("div",null,[s(o).deployerId==0?(v(),h("span",ie,t(e.$t("rate"))+"："+t(e.$t("0rate")),1)):(v(),h("span",re,t(e.$t("rate"))+"：买10% 卖20%",1))]),a("div",null,t(e.$t("managerAddress"))+"："+t(s(B)(s(o).owner)),1)])])]),s(o).canMint?(v(),h("div",le,[a("div",ce,t(e.$t("economicManagement")),1),i(f,{class:"cell"},{title:d(()=>[m(t(e.$t("published"))+" "+t(s(o).totalSupply),1)]),extra:d(()=>[i(c,{class:"btn",type:"primary",round:"",size:"mini",onClick:n[0]||(n[0]=r=>M()),disabled:!s($)},{default:d(()=>[m(t(e.$t("add")),1)]),_:1},8,["disabled"])]),_:1})])):I("",!0),a("div",de,[a("div",ue,t(e.$t("authorityManagement")),1),i(f,{class:"cell",title:e.$t("contractOwnership")},{extra:d(()=>[i(c,{class:"btn",type:"primary",round:"",size:"mini",onClick:U,disabled:!s($)},{default:d(()=>[m(t(e.$t("giveUp")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),a("div",me,[i(c,{type:"primary",class:"manage-btn",onClick:j},{default:d(()=>[m(t(e.$t("LPAddOrManage")),1)]),_:1}),i(c,{type:"primary",class:"lock-btn",onClick:D},{default:d(()=>[m(t(e.$t("lockToken")),1)]),_:1})]),s(A)?(v(),h("div",pe,[i(c,{type:"primary",block:"",onClick:E},{default:d(()=>[m(t(e.$t("importToWallet")),1)]),_:1})])):I("",!0)]),i(S,{show:p.value,"onUpdate:show":n[1]||(n[1]=r=>p.value=r),title:e.$t("giveUpConfirm"),message:e.$t("giveUpConfirmInfo"),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("confirmAndGiveUp"),confirmButtonLoading:_.value,onOnConfirm:z,onOnCancel:n[2]||(n[2]=r=>p.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),i(S,{show:g.value,"onUpdate:show":n[3]||(n[3]=r=>g.value=r),title:e.$t("giveUpSuccesslly"),message:s(N),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("copyHash"),onOnConfirm:n[4]||(n[4]=r=>s(Q)(C.value)),onOnCancel:n[5]||(n[5]=r=>g.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText"])],64)}}},ke=H(fe,[["__scopeId","data-v-210846be"]]);export{ke as default};
