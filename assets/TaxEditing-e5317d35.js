import{_ as E,b as R,Z as q,f as A,d as I,g as F,e as c,r as T,o as D,k as M,a as _,t as N,u as p,l as t,w as b,n as B,p as O,v as Z}from"./index-bbb3c8b7.js";import{u as j}from"./manage-b3c93436.js";import{R as x}from"./Rate-cd9f36e5.js";import{B as u}from"./bignumber-3e8dfdf6.js";import"./units-4881cef6.js";const z={class:"rate-editing"},G={class:"buy-rate"},H={class:"title"},J={class:"sell-rate"},K={class:"title"},Q={__name:"TaxEditing",setup(W){R(),q(),A();const a=j(),{t:y}=I(),g=F(!1),n=F(a.buyFundFee),i=F(a.buyLPFee),o=F(a.buyBurnFee),r=F(a.sellFundFee),v=F(a.sellLPFee),m=F(a.sellBurnFee);a.$subscribe((l,e)=>{n.value=a.buyFundFee,i.value=a.buyLPFee,o.value=a.buyBurnFee,r.value=a.sellFundFee,v.value=a.sellLPFee,m.value=a.sellBurnFee});const V=c(()=>u(n.value).plus(i.value).plus(o.value)),k=c(()=>u(r.value).plus(v.value).plus(m.value)),P=c(()=>Number(u(20).minus(i.value).minus(o.value))),S=c(()=>Number(u(20).minus(n.value).minus(o.value))),$=c(()=>Number(u(20).minus(n.value).minus(i.value))),L=c(()=>Number(u(20).minus(v.value).minus(m.value))),w=c(()=>Number(u(20).minus(r.value).minus(m.value))),C=c(()=>Number(u(20).minus(r.value).minus(v.value)));async function U(){if(u(n.value).plus(o.value).plus(i.value).plus(r.value).plus(m.value).plus(v.value).lte(0)){B(y("taxlimit"));return}g.value=!0;try{const l=await O.token.contract(a.tokenAddress,a.abi),e=await l._FeePercentageBase(),d=[u(i.value).div(100).multipliedBy(e).toNumber(),u(o.value).div(100).multipliedBy(e).toNumber(),u(n.value).div(100).multipliedBy(e).toNumber(),u(v.value).div(100).multipliedBy(e).toNumber(),u(m.value).div(100).multipliedBy(e).toNumber(),u(r.value).div(100).multipliedBy(e).toNumber()],f=await l.completeCustoms(d);B({type:"success",message:y("submitSuccess")}),await f.wait(),a.getTokenFee(a.tokenAddress),B({type:"success",message:y("editTaxSuccess")})}catch(l){l.code===4001?B(y("userCancelOperate")):B(y("editTaxFail"))}finally{g.value=!1}}return(l,e)=>{const d=T("van-cell"),f=T("van-button");return D(),M("div",z,[_("div",G,[_("div",H,N(l.$t("editBuyTax",{buyFee:p(V)})),1),t(d,{class:"rate-cell",title:l.$t("marketingTax")},{extra:b(()=>[t(x,{value:n.value,"onUpdate:value":e[0]||(e[0]=s=>n.value=s),maxValue:p(P)},null,8,["value","maxValue"])]),_:1},8,["title"]),t(d,{class:"rate-cell",title:l.$t("liquidityTax")},{extra:b(()=>[t(x,{value:i.value,"onUpdate:value":e[1]||(e[1]=s=>i.value=s),maxValue:p(S)},null,8,["value","maxValue"])]),_:1},8,["title"]),t(d,{class:"rate-cell",title:l.$t("burnTax")},{extra:b(()=>[t(x,{value:o.value,"onUpdate:value":e[2]||(e[2]=s=>o.value=s),maxValue:p($)},null,8,["value","maxValue"])]),_:1},8,["title"])]),_("div",J,[_("div",K,N(l.$t("editSellTax",{sellFee:p(k)})),1),t(d,{class:"rate-cell",title:l.$t("marketingTax")},{extra:b(()=>[t(x,{value:r.value,"onUpdate:value":e[3]||(e[3]=s=>r.value=s),maxValue:p(L)},null,8,["value","maxValue"])]),_:1},8,["title"]),t(d,{class:"rate-cell",title:l.$t("liquidityTax")},{extra:b(()=>[t(x,{value:v.value,"onUpdate:value":e[4]||(e[4]=s=>v.value=s),maxValue:p(w)},null,8,["value","maxValue"])]),_:1},8,["title"]),t(d,{class:"rate-cell",title:l.$t("burnTax")},{extra:b(()=>[t(x,{value:m.value,"onUpdate:value":e[5]||(e[5]=s=>m.value=s),maxValue:p(C)},null,8,["value","maxValue"])]),_:1},8,["title"])]),t(f,{type:"primary",round:"",block:"",class:"btn",loading:g.value,onClick:U},{default:b(()=>[Z(N(l.$t("submit")),1)]),_:1},8,["loading"])])}}},le=E(Q,[["__scopeId","data-v-6688ed84"]]);export{le as default};
