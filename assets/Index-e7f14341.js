import{_ as Y,d as x,f as K,b as Q,g,e as T,r as B,o as m,k as y,a,l,u as n,T as Z,t as s,w as i,B as w,c as F,F as ee,E as te,G as ne,n as d,v,X as se,Y as oe,p as ae}from"./index-9eae6901.js";import{g as re,f as j,c as le}from"./index-66b42143.js";import{B as _}from"./bignumber-3e8dfdf6.js";import{u as ie}from"./manage-d6c0ca92.js";import{D as N}from"./Dialog-9cbf5b6a.js";import"./units-86d8ffcb.js";/* empty css                                                       */const de=k=>(se("data-v-b2e5e31d"),k=k(),oe(),k),ue={class:"manage"},ce=de(()=>a("div",{class:"top-background"},null,-1)),pe={class:"top"},me={class:"token-info"},fe={class:"left"},ve={class:"token-name"},ye={class:"right"},we={key:0},he={key:1},ge={key:0,class:"model-manage"},ke={class:"title"},be={key:1,class:"trade-manage"},Ce={class:"title"},$e={class:"authority-manage"},Te={class:"title"},_e={class:"bottom-operate"},Ie={key:2,class:"bottom-operate",style:{marginTop:"12px",marginBottom:"20px"}},Oe={__name:"Index",setup(k){const P=window.ethereum.isMetaMask,{t:r}=x(),b=K(),I=Q(),e=ie(),C=g(!1),f=T(()=>I.walletAddress.toLowerCase()===e.owner.toLowerCase()),A=T(()=>{if(e.deployerId==1)return _(e.buyFundFee).plus(e.buyLPFee).plus(e.buyBurnFee);if(e.deployerId==2||e.deployerId==3)return _(e.buyFundFee).plus(e.buyLPFee).plus(e.buyRewardFee)}),M=T(()=>{if(e.deployerId==1)return _(e.sellFundFee).plus(e.sellLPFee).plus(e.sellBurnFee);if(e.deployerId==2||e.deployerId==3)return _(e.sellFundFee).plus(e.sellLPFee).plus(e.sellRewardFee)});let E=e.name;e.$subscribe((t,o)=>{o.name!=E&&(document.title=r("manageName",{name:o.name}),E=o.name)});const h=g(!1),O=g(!1),$=g(!1),L=g("");function U(){h.value=!0}const R=T(()=>r("operationHash",{hash:j(L.value)}));async function z(){O.value=!0;try{const o=await new te(window.ethereum).getSigner(),c=new ne(e.tokenAddress,e.abi,o);let p=await c.renounceOwnership();L.value=p.hash,p.wait().then(async S=>{S.status===1&&(d({type:"success",message:r("upChainSuccessfully")}),e.owner=await c.owner())}),$.value=!0,h.value=!1}catch(t){console.log(t),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}finally{O.value=!1}}async function W(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e.tokenAddress,symbol:e.symbol,decimals:e.decimals,image:""}}})}catch(t){console.log(t),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}}async function H(){if(!C.value&&f.value&&!e.tradeStart){C.value=!0;try{await(await(await ae.token.contract(e.tokenAddress,e.abi)).startTrade()).wait(),d({type:"success",message:r("tradeOpening")}),e.tradeStart=!0}catch(t){console.log(t.info),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}finally{C.value=!1}}}function V(){b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/mintToken")}function D(){f.value&&b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/whiteList")}function q(){console.log(f.value),f.value&&b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/taxEditing")}function G(){b.push("/manage/"+e.deployerId+"/"+e.tokenAddress+"/transferOwnership")}function J(){window.open("https://m.jfliquidity.xyz/add?utm_source=ave.ai")}function X(){window.open("http://m.avelock.xyz?utm_source=ave.ai")}return(t,o)=>{const c=B("van-button"),p=B("van-cell"),S=B("van-switch");return m(),y(ee,null,[a("div",ue,[ce,a("div",pe,[a("div",me,[a("div",fe,[l(Z,{class:"token-icon",tokenIcon:n(re)(n(I).chain.toLowerCase(),n(e).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),a("div",ve,s(n(e).name),1)]),a("div",ye,[a("div",null,s(t.$t("chain"))+"："+s(n(I).chain.toUpperCase()),1),a("div",null,s(t.$t("tokenSymbol"))+"："+s(n(e).symbol),1),a("div",null,s(t.$t("totalSupply"))+"："+s(n(e).totalSupply),1),a("div",null,[n(e).deployerId==0?(m(),y("span",we,s(t.$t("rate"))+"："+s(t.$t("freeTax")),1)):(m(),y("span",he,s(t.$t("tax"))+"："+s(t.$t("buy"))+s(n(A))+"% "+s(t.$t("sell"))+s(n(M))+"%",1))]),a("div",null,s(t.$t("managerAddress"))+"："+s(n(j)(n(e).owner)),1)])])]),n(e).canMint?(m(),y("div",ge,[a("div",ke,s(t.$t("economicManagement")),1),l(p,{class:"cell"},{title:i(()=>[v(s(t.$t("published"))+" "+s(n(e).totalSupply),1)]),extra:i(()=>[l(c,{class:"btn",type:"primary",round:"",size:"mini",onClick:o[0]||(o[0]=u=>V()),disabled:!n(f)},{default:i(()=>[v(s(t.$t("mint")),1)]),_:1},8,["disabled"])]),_:1})])):w("",!0),n(e).deployerId!=0&&(n(e).enableManualStartTrade||n(e).enableChangeTax||n(e).enableWhiteList)?(m(),y("div",be,[a("div",Ce,s(t.$t("tradeManage")),1),n(e).deployerId!=0&&n(e).enableManualStartTrade?(m(),F(p,{key:0,class:"cell",title:t.$t("openTrade")},{extra:i(()=>[l(S,{class:"switch","model-value":n(e).tradeStart,loading:C.value,onClick:o[1]||(o[1]=u=>H()),disabled:n(e).tradeStart||!n(f)},null,8,["model-value","loading","disabled"])]),_:1},8,["title"])):w("",!0),n(e).deployerId!=0&&n(e).enableChangeTax?(m(),F(p,{key:1,title:t.$t("taxEdit"),"is-link":"",onClick:o[2]||(o[2]=u=>q())},{value:i(()=>[v(s(t.$t("buy"))+s(n(A))+"% "+s(t.$t("sell"))+s(n(M))+"% ",1)]),_:1},8,["title"])):w("",!0),n(e).deployerId!=0&&n(e).enableWhiteList?(m(),F(p,{key:2,title:t.$t("whiteList"),"is-link":"",value:n(e).whiteListCount,onClick:o[3]||(o[3]=u=>D())},null,8,["title","value"])):w("",!0)])):w("",!0),a("div",$e,[a("div",Te,s(t.$t("authorityManagement")),1),l(p,{class:"cell",title:t.$t("contractOwnership")},{extra:i(()=>[l(c,{class:"btn",type:"primary",round:"",size:"mini",onClick:U,disabled:!n(f)},{default:i(()=>[v(s(t.$t("renounce")),1)]),_:1},8,["disabled"])]),_:1},8,["title"]),l(p,{class:"cell",title:t.$t("transferOwnership")},{extra:i(()=>[l(c,{class:"btn",type:"primary",round:"",size:"mini",onClick:G,disabled:!n(f)},{default:i(()=>[v(s(t.$t("transfer")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),a("div",_e,[l(c,{type:"primary",class:"manage-btn",onClick:J},{default:i(()=>[v(s(t.$t("LPAddOrManage")),1)]),_:1}),l(c,{type:"primary",class:"lock-btn",onClick:X},{default:i(()=>[v(s(t.$t("lockToken")),1)]),_:1})]),n(P)?(m(),y("div",Ie,[l(c,{type:"primary",block:"",onClick:W},{default:i(()=>[v(s(t.$t("importToWallet")),1)]),_:1})])):w("",!0)]),l(N,{show:h.value,"onUpdate:show":o[4]||(o[4]=u=>h.value=u),title:t.$t("giveUpConfirm"),message:t.$t("giveUpConfirmInfo"),cancelButtonText:t.$t("thinkAgain"),confirmButtonText:t.$t("confirmAndGiveUp"),confirmButtonLoading:O.value,onOnConfirm:z,onOnCancel:o[5]||(o[5]=u=>h.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),l(N,{show:$.value,"onUpdate:show":o[6]||(o[6]=u=>$.value=u),title:t.$t("giveUpSuccesslly"),message:n(R),showCancelButton:!1,confirmButtonText:t.$t("copyHash"),onOnConfirm:o[7]||(o[7]=u=>n(le)(L.value)),onOnCancel:o[8]||(o[8]=u=>$.value=!1)},null,8,["show","title","message","confirmButtonText"])],64)}}},je=Y(Oe,[["__scopeId","data-v-b2e5e31d"]]);export{je as default};
