import{_ as X,d as Y,f as K,b as Q,g,e as T,r as B,o as p,k as h,a as o,l,u as n,T as Z,t as s,w as r,z as w,c as L,F as ee,C as te,D as ne,n as m,v,X as se,Y as ae,p as oe}from"./index-10bbdcc5.js";import{g as le,f as E,c as re}from"./index-7c5f929a.js";import{B as j}from"./bignumber-3e8dfdf6.js";import{u as ie}from"./manage-ad6095dc.js";import{D as N}from"./Dialog-ee05ac2a.js";import"./units-63436c18.js";/* empty css                                                       */const de=k=>(se("data-v-cadca73c"),k=k(),ae(),k),ue={class:"manage"},ce=de(()=>o("div",{class:"top-background"},null,-1)),pe={class:"top"},me={class:"token-info"},fe={class:"left"},ve={class:"token-name"},he={class:"right"},we={key:0},ye={key:1},ge={key:0,class:"model-manage"},ke={class:"title"},be={key:1,class:"trade-manage"},Ce={class:"title"},$e={class:"authority-manage"},Te={class:"title"},_e={class:"bottom-operate"},Ie={key:2,class:"bottom-operate",style:{marginTop:"12px"}},Oe={__name:"Index",setup(k){const U=window.ethereum.isMetaMask,{t:i}=Y(),b=K(),_=Q(),t=ie(),C=g(!1),f=T(()=>_.walletAddress.toLowerCase()===t.owner.toLowerCase()),A=T(()=>j(t.buyFundFee).plus(t.buyLPFee).plus(t.buyBurnFee)),M=T(()=>j(t.sellFundFee).plus(t.sellLPFee).plus(t.sellBurnFee));let F=t.name;t.$subscribe((e,a)=>{a.name!=F&&(document.title=i("manageName",{name:a.name}),F=a.name)});const y=g(!1),I=g(!1),$=g(!1),O=g("");function z(){y.value=!0}const P=T(()=>i("operationHash",{hash:E(O.value)}));async function W(){I.value=!0;try{const a=await new te(window.ethereum).getSigner(),u=new ne(t.tokenAddress,t.abi,a);let c=await u.renounceOwnership();O.value=c.hash,c.wait().then(async S=>{S.status===1&&(m({type:"success",message:i("upChainSuccessfully")}),t.owner=await u.owner())}),$.value=!0,y.value=!1}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?m(i("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?m(i("userCancelOperate")):m(i("unkonwError"))}finally{I.value=!1}}async function D(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t.tokenAddress,symbol:t.symbol,decimals:t.decimals,image:""}}})}catch(e){console.log(e),e.code===4001?m(i("userCancelOperate")):m(i("unkonwError"))}}async function H(){if(!C.value&&f.value&&!t.tradeStart){C.value=!0;try{await(await(await oe.token.contract(t.tokenAddress,t.abi)).startTrade()).wait(),m({type:"success",message:i("tradeOpening")}),t.tradeStart=!0}catch(e){console.log(e),e.code===4001?m(i("userCancelOperate")):m(i("unkonwError"))}finally{C.value=!1}}}function R(){b.push("/manage/"+t.deployerId+"/"+t.tokenAddress+"/mintToken")}function V(){f.value&&b.push("/manage/"+t.deployerId+"/"+t.tokenAddress+"/whiteList")}function q(){console.log(f.value),f.value&&b.push("/manage/"+t.deployerId+"/"+t.tokenAddress+"/taxEditing")}function x(){b.push("/manage/"+t.deployerId+"/"+t.tokenAddress+"/transferOwnership")}function G(){window.open("https://m.jfliquidity.xyz/add?utm_source=ave.ai")}function J(){window.open("http://m.avelock.xyz?utm_source=ave.ai")}return(e,a)=>{const u=B("van-button"),c=B("van-cell"),S=B("van-switch");return p(),h(ee,null,[o("div",ue,[ce,o("div",pe,[o("div",me,[o("div",fe,[l(Z,{class:"token-icon",tokenIcon:n(le)(n(_).chain.toLowerCase(),n(t).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),o("div",ve,s(n(t).name),1)]),o("div",he,[o("div",null,s(e.$t("chain"))+"："+s(n(_).chain.toUpperCase()),1),o("div",null,s(e.$t("totalSupply"))+"："+s(n(t).totalSupply)+" "+s(n(t).symbol),1),o("div",null,[n(t).deployerId==0?(p(),h("span",we,s(e.$t("rate"))+"："+s(e.$t("freeTax")),1)):(p(),h("span",ye,s(e.$t("tax"))+"："+s(e.$t("buy"))+s(n(A))+"% "+s(e.$t("sell"))+s(n(M))+"%",1))]),o("div",null,s(e.$t("managerAddress"))+"："+s(n(E)(n(t).owner)),1)])])]),n(t).canMint?(p(),h("div",ge,[o("div",ke,s(e.$t("economicManagement")),1),l(c,{class:"cell"},{title:r(()=>[v(s(e.$t("published"))+" "+s(n(t).totalSupply),1)]),extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:a[0]||(a[0]=d=>R()),disabled:!n(f)},{default:r(()=>[v(s(e.$t("mint")),1)]),_:1},8,["disabled"])]),_:1})])):w("",!0),n(t).deployerId!=0&&(n(t).enableManualStartTrade||n(t).enableChangeTax||n(t).enableWhiteList)?(p(),h("div",be,[o("div",Ce,s(e.$t("tradeManage")),1),n(t).deployerId!=0&&n(t).enableManualStartTrade?(p(),L(c,{key:0,class:"cell",title:e.$t("openTrade")},{extra:r(()=>[l(S,{class:"switch","model-value":n(t).tradeStart,loading:C.value,onClick:a[1]||(a[1]=d=>H()),disabled:n(t).tradeStart||!n(f)},null,8,["model-value","loading","disabled"])]),_:1},8,["title"])):w("",!0),n(t).deployerId!=0&&n(t).enableChangeTax?(p(),L(c,{key:1,title:e.$t("taxEdit"),"is-link":"",onClick:a[2]||(a[2]=d=>q())},{value:r(()=>[v(s(e.$t("buy"))+s(n(A))+"% "+s(e.$t("sell"))+s(n(M))+"% ",1)]),_:1},8,["title"])):w("",!0),n(t).deployerId!=0&&n(t).enableWhiteList?(p(),L(c,{key:2,title:e.$t("whiteList"),"is-link":"",value:n(t).whiteListCount,onClick:a[3]||(a[3]=d=>V())},null,8,["title","value"])):w("",!0)])):w("",!0),o("div",$e,[o("div",Te,s(e.$t("authorityManagement")),1),l(c,{class:"cell",title:e.$t("contractOwnership")},{extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:z,disabled:!n(f)},{default:r(()=>[v(s(e.$t("renounce")),1)]),_:1},8,["disabled"])]),_:1},8,["title"]),l(c,{class:"cell",title:e.$t("transferOwnership")},{extra:r(()=>[l(u,{class:"btn",type:"primary",round:"",size:"mini",onClick:x,disabled:!n(f)},{default:r(()=>[v(s(e.$t("transfer")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),o("div",_e,[l(u,{type:"primary",class:"manage-btn",onClick:G},{default:r(()=>[v(s(e.$t("LPAddOrManage")),1)]),_:1}),l(u,{type:"primary",class:"lock-btn",onClick:J},{default:r(()=>[v(s(e.$t("lockToken")),1)]),_:1})]),n(U)?(p(),h("div",Ie,[l(u,{type:"primary",block:"",onClick:D},{default:r(()=>[v(s(e.$t("importToWallet")),1)]),_:1})])):w("",!0)]),l(N,{show:y.value,"onUpdate:show":a[4]||(a[4]=d=>y.value=d),title:e.$t("giveUpConfirm"),message:e.$t("giveUpConfirmInfo"),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("confirmAndGiveUp"),confirmButtonLoading:I.value,onOnConfirm:W,onOnCancel:a[5]||(a[5]=d=>y.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),l(N,{show:$.value,"onUpdate:show":a[6]||(a[6]=d=>$.value=d),title:e.$t("giveUpSuccesslly"),message:n(P),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("copyHash"),onOnConfirm:a[7]||(a[7]=d=>n(re)(O.value)),onOnCancel:a[8]||(a[8]=d=>$.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText"])],64)}}},je=X(Oe,[["__scopeId","data-v-cadca73c"]]);export{je as default};
