import{_ as H,d as R,f as V,b as z,e as T,g as y,r as O,o as v,k as h,a,l as r,u as s,T as P,t as o,w as c,z as I,F,D as W,E as j,n as u,v as m,O as q,P as G}from"./index-e25bf263.js";import{g as x,f as B,c as J}from"./index-3879f447.js";import{D as S}from"./Dialog-87fa9877.js";import{u as K}from"./manage-dc76f7c2.js";/* empty css                                                       */const Q=w=>(q("data-v-41d460b5"),w=w(),G(),w),X={class:"manage"},Y=Q(()=>a("div",{class:"top-background"},null,-1)),Z={class:"top"},ee={class:"token-info"},te={class:"left"},oe={class:"token-name"},ne={class:"right"},se={key:0},ae={key:1},re={key:0,class:"model-manage"},ie={class:"title"},le={class:"authority-manage"},de={class:"title"},ce={class:"bottom-operate"},ue={key:1,class:"bottom-operate",style:{marginTop:"12px"}},me={__name:"Index",setup(w){const A=window.ethereum.isMetaMask,{t:l}=R(),M=V(),k=z(),n=K(),$=T(()=>k.walletAddress.toLowerCase()===n.owner.toLowerCase());let b=n.name;n.$subscribe((e,t)=>{t.name!=b&&(document.title=l("manageName",{name:t.name}),b=t.name)});function L(){M.push("/manage/"+n.deployerId+"/"+n.tokenAddress+"/addToken")}const p=y(!1),_=y(!1),g=y(!1),C=y("");function U(){p.value=!0}const N=T(()=>l("operationHash",{hash:B(C.value)}));async function E(){_.value=!0;try{const t=await new W(window.ethereum).getSigner(),d=new j(n.tokenAddress,n.abi,t);let f=await d.renounceOwnership();C.value=f.hash,f.wait().then(async i=>{i.status===1&&(u({type:"success",message:l("upChainSuccessfully")}),n.owner=await d.owner())}),g.value=!0,p.value=!1}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?u(l("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?u(l("userCancelOperate")):u(l("unkonwError"))}finally{_.value=!1}}async function D(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n.tokenAddress,symbol:n.symbol,decimals:n.decimals,image:""}}})}catch(e){console.log(e),e.code===4001?u(l("userCancelOperate")):u(l("unkonwError"))}}return(e,t)=>{const d=O("van-button"),f=O("van-cell");return v(),h(F,null,[a("div",X,[Y,a("div",Z,[a("div",ee,[a("div",te,[r(P,{class:"token-icon",tokenIcon:s(x)(s(k).chain.toLowerCase(),s(n).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),a("div",oe,o(s(n).name),1)]),a("div",ne,[a("div",null,o(e.$t("chain"))+"："+o(s(k).chain.toUpperCase()),1),a("div",null,o(e.$t("totalSupply"))+"："+o(s(n).totalSupply)+" "+o(s(n).symbol),1),a("div",null,[s(n).deployerId==0?(v(),h("span",se,o(e.$t("rate"))+"："+o(e.$t("0rate")),1)):(v(),h("span",ae,o(e.$t("rate"))+"：买10% 卖20%",1))]),a("div",null,o(e.$t("managerAddress"))+"："+o(s(B)(s(n).owner)),1)])])]),s(n).canMint?(v(),h("div",re,[a("div",ie,o(e.$t("economicManagement")),1),r(f,{class:"cell"},{title:c(()=>[m(o(e.$t("published"))+" "+o(s(n).totalSupply),1)]),extra:c(()=>[r(d,{class:"btn",type:"primary",round:"",size:"mini",onClick:t[0]||(t[0]=i=>L()),disabled:!s($)},{default:c(()=>[m(o(e.$t("add")),1)]),_:1},8,["disabled"])]),_:1})])):I("",!0),a("div",le,[a("div",de,o(e.$t("authorityManagement")),1),r(f,{class:"cell",title:e.$t("contractOwnership")},{extra:c(()=>[r(d,{class:"btn",type:"primary",round:"",size:"mini",onClick:U,disabled:!s($)},{default:c(()=>[m(o(e.$t("giveUp")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),a("div",ce,[r(d,{type:"primary",class:"manage-btn",onClick:t[1]||(t[1]=()=>{})},{default:c(()=>[m(o(e.$t("LPAddOrManage")),1)]),_:1}),r(d,{type:"primary",class:"lock-btn"},{default:c(()=>[m(o(e.$t("lockToken")),1)]),_:1})]),s(A)?(v(),h("div",ue,[r(d,{type:"primary",block:"",onClick:D},{default:c(()=>[m(o(e.$t("importToWallet")),1)]),_:1})])):I("",!0)]),r(S,{show:p.value,"onUpdate:show":t[2]||(t[2]=i=>p.value=i),title:e.$t("giveUpConfirm"),message:e.$t("giveUpConfirmInfo"),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("confirmAndGiveUp"),confirmButtonLoading:_.value,onOnConfirm:E,onOnCancel:t[3]||(t[3]=i=>p.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),r(S,{show:g.value,"onUpdate:show":t[4]||(t[4]=i=>g.value=i),title:e.$t("giveUpSuccesslly"),message:s(N),cancelButtonText:e.$t("thinkAgain"),confirmButtonText:e.$t("copyHash"),onOnConfirm:t[5]||(t[5]=i=>s(J)(C.value)),onOnCancel:t[6]||(t[6]=i=>g.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText"])],64)}}},ge=H(me,[["__scopeId","data-v-41d460b5"]]);export{ge as default};
