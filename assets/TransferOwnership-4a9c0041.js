import{_ as w,d as b,f as h,g as i,r as c,o as y,k,l as o,w as d,n as t,p as C,u as A,v as O,t as $}from"./index-26fecd63.js";import{u as S}from"./manage-bb493206.js";import{f as T}from"./index-5ae56526.js";import"./bignumber-3e8dfdf6.js";import"./units-73d8a800.js";const V={class:"authority-transfer"},x={__name:"TransferOwnership",setup(F){const{t:s}=b(),a=S(),m=h(),l=i(a.owner),n=i(""),u=i(!1);a.$subscribe((e,r)=>{l.value=a.owner});async function _(){if(!/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/.test(n.value)){t(s("trueFormat"));return}if(n.value==l.value){t(s("transferConsistent"));return}u.value=!0;try{const e=await C.token.contract(a.tokenAddress,a.abi),r=await e.transferOwnership(n.value);t({type:"success",message:s("submitSuccess")}),await r.wait(),a.owner=await e.owner(),n.value="",t({type:"success",message:s("transferSuccess"),onClose:()=>{m.push("/manage/"+a.deployerId+"/"+a.tokenAddress)}})}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?t(s("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?t(s("userCancelOperate")):t(s("transferFail"))}finally{u.value=!1}}return(e,r)=>{const p=c("van-field"),f=c("van-cell-group"),v=c("van-button");return y(),k("div",V,[o(f,{inset:""},{default:d(()=>[o(p,{"model-value":A(T)(l.value),"label-width":"9.5em",disabled:"",label:e.$t("ownership"),"input-align":"right"},null,8,["model-value","label"])]),_:1}),o(f,{inset:""},{default:d(()=>[o(p,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=g=>n.value=g),label:e.$t("transferTo"),placeholder:e.$t("input"),"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),o(v,{type:"primary",round:"",block:"",class:"btn",loading:u.value,onClick:_},{default:d(()=>[O($(e.$t("submit")),1)]),_:1},8,["loading"])])}}},L=w(x,[["__scopeId","data-v-964e49cf"]]);export{L as default};
