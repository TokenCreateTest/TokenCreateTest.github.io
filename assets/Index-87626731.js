import{_ as ge,i as me,r as P,o as A,c as K,w as E,a as h,t as k,u as v,b as pe,d as ve,e as $e,f as ye,g as ne,h as _e,j as we,k as Z,l as C,m as le,F as ue,s as ce,n as ke,p as de,q as De,T as Me,v as se}from"./index-9eae6901.js";import{u as be}from"./create-b777024e.js";import{f as fe,c as he,g as Se,a as Ce}from"./index-66b42143.js";import{_ as Q}from"./SvgIcon-5db6c8fa.js";import{D as Te}from"./DropDown-d6e04f9d.js";var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie={},Ie={get exports(){return ie},set exports(Y){ie=Y}};(function(Y,F){(function(c,y){Y.exports=y()})(Le,function(){var c=1e3,y=6e4,T=36e5,b="millisecond",m="second",l="minute",L="hour",S="day",z="week",D="month",B="quarter",H="year",j="date",g="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],e=s%100;return"["+s+(n[(e-20)%10]||n[e]||n[0])+"]"}},N=function(s,n,e){var o=String(s);return!o||o.length>=n?s:""+Array(n+1-o.length).join(e)+s},x={s:N,z:function(s){var n=-s.utcOffset(),e=Math.abs(n),o=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+N(o,2,"0")+":"+N(t,2,"0")},m:function s(n,e){if(n.date()<e.date())return-s(e,n);var o=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(o,D),i=e-t<0,a=n.clone().add(o+(i?-1:1),D);return+(-(o+(e-t)/(i?t-a:a-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:D,y:H,w:z,d:S,D:j,h:L,m:l,s:m,ms:b,Q:B}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},r="en",O={};O[r]=I;var oe=function(s){return s instanceof ee},X=function s(n,e,o){var t;if(!n)return r;if(typeof n=="string"){var i=n.toLowerCase();O[i]&&(t=i),e&&(O[i]=e,t=i);var a=n.split("-");if(!t&&a.length>1)return s(a[0])}else{var d=n.name;O[d]=n,t=d}return!o&&t&&(r=t),t||!o&&r},_=function(s,n){if(oe(s))return s.clone();var e=typeof n=="object"?n:{};return e.date=s,e.args=arguments,new ee(e)},f=x;f.l=X,f.i=oe,f.w=function(s,n){return _(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var ee=function(){function s(e){this.$L=X(e.locale,null,!0),this.parse(e)}var n=s.prototype;return n.parse=function(e){this.$d=function(o){var t=o.date,i=o.utc;if(t===null)return new Date(NaN);if(f.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var a=t.match(u);if(a){var d=a[2]-1||0,$=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,$)):new Date(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,$)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return f},n.isValid=function(){return this.$d.toString()!==g},n.isSame=function(e,o){var t=_(e);return this.startOf(o)<=t&&t<=this.endOf(o)},n.isAfter=function(e,o){return _(e)<this.startOf(o)},n.isBefore=function(e,o){return this.endOf(o)<_(e)},n.$g=function(e,o,t){return f.u(e)?this[o]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,o){var t=this,i=!!f.u(o)||o,a=f.p(e),d=function(J,M){var R=f.w(t.$u?Date.UTC(t.$y,M,J):new Date(t.$y,M,J),t);return i?R:R.endOf(S)},$=function(J,M){return f.w(t.toDate()[J].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(M)),t)},p=this.$W,w=this.$M,V=this.$D,W="set"+(this.$u?"UTC":"");switch(a){case H:return i?d(1,0):d(31,11);case D:return i?d(1,w):d(0,w+1);case z:var q=this.$locale().weekStart||0,G=(p<q?p+7:p)-q;return d(i?V-G:V+(6-G),w);case S:case j:return $(W+"Hours",0);case L:return $(W+"Minutes",1);case l:return $(W+"Seconds",2);case m:return $(W+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,o){var t,i=f.p(e),a="set"+(this.$u?"UTC":""),d=(t={},t[S]=a+"Date",t[j]=a+"Date",t[D]=a+"Month",t[H]=a+"FullYear",t[L]=a+"Hours",t[l]=a+"Minutes",t[m]=a+"Seconds",t[b]=a+"Milliseconds",t)[i],$=i===S?this.$D+(o-this.$W):o;if(i===D||i===H){var p=this.clone().set(j,1);p.$d[d]($),p.init(),this.$d=p.set(j,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d]($);return this.init(),this},n.set=function(e,o){return this.clone().$set(e,o)},n.get=function(e){return this[f.p(e)]()},n.add=function(e,o){var t,i=this;e=Number(e);var a=f.p(o),d=function(w){var V=_(i);return f.w(V.date(V.date()+Math.round(w*e)),i)};if(a===D)return this.set(D,this.$M+e);if(a===H)return this.set(H,this.$y+e);if(a===S)return d(1);if(a===z)return d(7);var $=(t={},t[l]=y,t[L]=T,t[m]=c,t)[a]||1,p=this.$d.getTime()+e*$;return f.w(p,this)},n.subtract=function(e,o){return this.add(-1*e,o)},n.format=function(e){var o=this,t=this.$locale();if(!this.isValid())return t.invalidDate||g;var i=e||"YYYY-MM-DDTHH:mm:ssZ",a=f.z(this),d=this.$H,$=this.$m,p=this.$M,w=t.weekdays,V=t.months,W=function(M,R,ae,te){return M&&(M[R]||M(o,i))||ae[R].slice(0,te)},q=function(M){return f.s(d%12||12,M,"0")},G=t.meridiem||function(M,R,ae){var te=M<12?"AM":"PM";return ae?te.toLowerCase():te},J={YY:String(this.$y).slice(-2),YYYY:this.$y,M:p+1,MM:f.s(p+1,2,"0"),MMM:W(t.monthsShort,p,V,3),MMMM:W(V,p),D:this.$D,DD:f.s(this.$D,2,"0"),d:String(this.$W),dd:W(t.weekdaysMin,this.$W,w,2),ddd:W(t.weekdaysShort,this.$W,w,3),dddd:w[this.$W],H:String(d),HH:f.s(d,2,"0"),h:q(1),hh:q(2),a:G(d,$,!0),A:G(d,$,!1),m:String($),mm:f.s($,2,"0"),s:String(this.$s),ss:f.s(this.$s,2,"0"),SSS:f.s(this.$ms,3,"0"),Z:a};return i.replace(U,function(M,R){return R||J[M]||a.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,o,t){var i,a=f.p(o),d=_(e),$=(d.utcOffset()-this.utcOffset())*y,p=this-d,w=f.m(this,d);return w=(i={},i[H]=w/12,i[D]=w,i[B]=w/3,i[z]=(p-$)/6048e5,i[S]=(p-$)/864e5,i[L]=p/T,i[l]=p/y,i[m]=p/c,i)[a]||p,t?w:f.a(w)},n.daysInMonth=function(){return this.endOf(D).$D},n.$locale=function(){return O[this.$L]},n.locale=function(e,o){if(!e)return this.$L;var t=this.clone(),i=X(e,o,!0);return i&&(t.$L=i),t},n.clone=function(){return f.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s}(),re=ee.prototype;return _.prototype=re,[["$ms",b],["$s",m],["$m",l],["$H",L],["$W",S],["$M",D],["$y",H],["$D",j]].forEach(function(s){re[s[1]]=function(n){return this.$g(n,s[0],s[1])}}),_.extend=function(s,n){return s.$i||(s(n,ee,_),s.$i=!0),_},_.locale=X,_.isDayjs=oe,_.unix=function(s){return _(1e3*s)},_.en=O[r],_.Ls=O,_.p={},_})})(Ie);const xe=ie;const Oe={class:"content"},Ae={__name:"HelpDialog",props:{show:Boolean},emits:["update:show"],setup(Y,{emit:F}){const c=me("global");return(y,T)=>{const b=P("van-dialog");return A(),K(b,{class:"help-dialog",show:Y.show,title:y.$t("rulesDescription"),"confirm-button-text":y.$t("understand"),onConfirm:T[0]||(T[0]=m=>F("update:show",!1)),onClose:T[1]||(T[1]=m=>F("update:show",!1)),"close-on-click-overlay":""},{default:E(()=>[h("div",Oe,[h("div",null,k(y.$t("rulesDescription1",{chains:v(c).cfg.allowChainList.map(m=>m.chain.toUpperCase()).join("/")})),1),h("div",null,k(y.$t("rulesDescription2")),1),h("div",null,k(y.$t("rulesDescription3")),1),h("div",null,k(y.$t("rulesDescription4")),1),h("div",null,k(y.$t("rulesDescription5")),1)])]),_:1},8,["show","title","confirm-button-text"])}}},He=ge(Ae,[["__scopeId","data-v-5e1bd8cc"]]),Ne={__name:"SelectLanDialog",props:{show:Boolean},emits:["update:show"],setup(Y,{emit:F}){const c=pe(),{t:y}=ve(),T=$e(()=>[{name:y("languages.zh-cn"),value:"zh-cn",color:c.language==="zh-cn"?"#3F80F7":"#323233"},{name:y("languages.en"),value:"en",color:c.language==="en"?"#3F80F7":"#323233"}]);function b(m){c.setLanguage(m.value),F("update:show",!1)}return(m,l)=>{const L=P("van-action-sheet");return A(),K(L,{show:Y.show,title:m.$t("switchLang"),actions:v(T),onClose:l[0]||(l[0]=S=>F("update:show",!1)),closeable:!1,"cancel-text":m.$t("cancel"),"close-on-click-action":"",onSelect:b},null,8,["show","title","actions","cancel-text"])}}};const We={class:"token-create"},Ye={class:"tools-bar"},Fe={key:0,class:"address"},je={class:"address-text"},Ue={style:{"margin-left":"6px"}},Ve={class:"tools"},Re={class:"token-box"},ze={class:"token"},Be={class:"title"},Je=["onClick"],Ze={class:"content"},Ee={class:"name"},Pe={class:"create-time"},qe={key:1,class:"no-data"},Ge={class:"text"},Qe={class:"bottom-operate"},Ke={__name:"Index",setup(Y){const{t:F}=ve(),c=pe(),y=be(),T=ye(),b=ne(0),m=ne(10),l=_e({pageNumber:0,tokenList:[],loading:!1,finished:!1,error:!1,refreshing:!1}),L=ne(!1),S=ne(!1);function z(){y.$reset(),T.push("/create/basicInfo")}async function D(){let g=c.tokenFactoryAddress,u=c.walletAddress,U=ce({duration:0});u||ke(F("pleaseConnectWallet"));try{let I=await de.tokenFactory.getTotalRecords(g,u);b.value=Number(I),console.log(Number(I))}catch(I){console.log(I)}finally{l.refreshing=!1,U.close()}}async function B(){l.loading=!0;let g=ce({duration:0}),u=c.tokenFactoryAddress.toLowerCase(),U=c.walletAddress.toLowerCase(),I=(l.pageNumber*m.value).toString(),N=(l.pageNumber*m.value+m.value-1).toString();console.log(I),console.log(N);try{let x=await de.tokenFactory.getOwnRecords(u,U,I,N);console.log(x);for(let r of x){let O={tokenAddress:r[6].toLowerCase(),createTime:Number(r[0]),symbol:r[4],name:r[3],deployerId:Number(r[5])};l.tokenList.push(O)}x.length<m.value||b.value==Number(N)+1?l.finished=!0:l.pageNumber++}catch(x){l.error=!0,console.log(x)}finally{g.close(),l.loading=!1,l.refreshing=!1}}async function H(){l.pageNumber=0,l.tokenList=[],l.finished=!1,await D(),b.value>0&&(console.log(b.value),B())}function j(g,u){T.push("/manage/"+g+"/"+u)}return we(()=>{let g=setInterval(async()=>{c.isConnectWallet&&(clearInterval(g),await D(),b.value>0&&B())},100)}),(g,u)=>{const U=P("van-image"),I=P("van-list"),N=P("van-pull-refresh"),x=P("van-button");return A(),Z(ue,null,[h("div",We,[h("div",Ye,[v(c).isConnectWallet?(A(),Z("div",Fe,[C(Te,{class:"switch-chain",onClick:u[0]||(u[0]=r=>v(c).showSelectChainPopup=!0),error:v(c).chainId==-1,logo:v(c).chainIcon,value:v(c).chain.toUpperCase()},null,8,["error","logo","value"]),h("div",je,k(v(fe)(v(c).walletAddress)),1),C(Q,{class:"copy-icon",name:"copy",onClick:u[1]||(u[1]=le(r=>v(he)(v(c).walletAddress),["stop"]))})])):(A(),Z("div",{key:1,class:"address",onClick:u[2]||(u[2]=(...r)=>v(c).connectWallet&&v(c).connectWallet(...r))},[C(Q,{class:"icon",name:"wallet"}),h("div",Ue,k(g.$t("pleaseConnectWallet")),1)])),h("div",Ve,[C(Q,{class:"icon",name:"language",onClick:u[3]||(u[3]=r=>S.value=!0)}),C(Q,{class:"icon",name:"help",onClick:u[4]||(u[4]=r=>L.value=!0)})])]),h("div",Re,[h("div",ze,[h("div",Be,k(g.$t("myToken")),1),C(N,{modelValue:l.refreshing,"onUpdate:modelValue":u[8]||(u[8]=r=>l.refreshing=r),"pulling-text":g.$t("pulling"),"loosing-text":g.$t("loosing"),"loading-text":g.$t("loading"),onRefresh:H},{default:E(()=>[l.tokenList.length>0?(A(),K(I,{key:0,class:"token-list","loading-text":g.$t("loading"),loading:l.loading,"onUpdate:loading":u[5]||(u[5]=r=>l.loading=r),finished:l.finished,"finished-text":g.$t("noMore"),error:l.error,"onUpdate:error":u[6]||(u[6]=r=>l.error=r),"error-text":g.$t("errorText"),onLoad:u[7]||(u[7]=r=>B())},{default:E(()=>[(A(!0),Z(ue,null,De(l.tokenList,r=>(A(),Z("div",{class:"item",onClick:O=>j(r.deployerId,r.tokenAddress)},[h("div",null,[C(Me,{class:"token-icon",tokenIcon:v(Se)(v(c).chain.toLowerCase(),r.tokenAddress.toLowerCase()),chainIcon:v(Ce)(v(c).chain.toLowerCase())},null,8,["tokenIcon","chainIcon"]),h("div",Ze,[h("div",Ee,[h("span",null,k(r.symbol),1),h("span",null,"（"+k(r.name)+"）",1)]),h("div",null,[se(k(v(fe)(r.tokenAddress))+" ",1),C(Q,{class:"copy-icon",name:"copy",onClick:le(O=>v(he)(r.tokenAddress),["stop"])},null,8,["onClick"])]),h("div",Pe,k(v(xe).unix(r.createTime).format("YYYY-MM-DD HH:mm:ss")),1)])]),h("div",null,[C(U,{class:"image",src:"/assets/images/manage.png"})])],8,Je))),256))]),_:1},8,["loading-text","loading","finished","finished-text","error","error-text"])):(A(),Z("div",qe,[C(U,{class:"image",src:"/assets/images/warn.png"}),h("div",Ge,k(g.$t("noToken")),1)]))]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])])]),h("div",Qe,[v(c).isConnectWallet?(A(),K(x,{key:0,type:"primary",round:"",block:"",class:"btn",onClick:z},{default:E(()=>[se(k(g.$t("createToken")),1)]),_:1})):(A(),K(x,{key:1,type:"primary",round:"",block:"",class:"btn",onClick:v(c).connectWallet},{default:E(()=>[se(k(g.$t("connectWallet")),1)]),_:1},8,["onClick"])),C(x,{type:"primary",round:"",block:"",plain:"",class:"btn"},{default:E(()=>[se(k(g.$t("viewTutorial")),1)]),_:1})])]),C(He,{show:L.value,"onUpdate:show":u[9]||(u[9]=r=>L.value=r)},null,8,["show"]),C(Ne,{show:S.value,"onUpdate:show":u[10]||(u[10]=r=>S.value=r)},null,8,["show"])],64)}}},ot=ge(Ke,[["__scopeId","data-v-7f07c5f6"]]);export{ot as default};
